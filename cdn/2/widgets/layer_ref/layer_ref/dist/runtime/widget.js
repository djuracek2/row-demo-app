System.register(["jimu-core/react","jimu-arcgis","calcite-components","jimu-ui","esri/core/reactiveUtils"],(function(e,t){var n={},i={},r={},a={},o={};return{setters:[function(e){n.createElement=e.createElement,n.default=e.default,n.useEffect=e.useEffect,n.useState=e.useState},function(e){i.JimuMapViewComponent=e.JimuMapViewComponent},function(e){r.CalciteAccordion=e.CalciteAccordion},function(e){a.Button=e.Button,a.Icon=e.Icon},function(e){o.default=e.default}],execute:function(){e((()=>{var e={738:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(81),r=n.n(i),a=n(645),o=n.n(a)()(r());o.push([e.id,".widget-content{overflow-x:hidden !important}.labels-button{padding:0}.accordion-container{display:flex;flex-direction:column}.accordion-header{display:flex;justify-content:space-between;align-items:center;padding:10px}#decrease-Btn{padding-left:5px !important}#increase-Btn{padding-left:3px !important}",""]);const l=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(o[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&o[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var a={},o=[],l=0;l<e.length;l++){var s=e[l],c=i.base?s[0]+i.base:s[0],d=a[c]||0,u="".concat(c," ").concat(d);a[c]=d+1;var p=n(u),f={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=r(f,i);i.byIndex=l,t.splice(l,0,{identifier:u,updater:m,references:1})}o.push(u)}return o}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var a=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var l=n(a[o]);t[l].references--}for(var s=i(e,r),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=s}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},145:e=>{"use strict";e.exports=r},135:e=>{"use strict";e.exports=o},826:e=>{"use strict";e.exports=i},315:e=>{"use strict";e.exports=n},726:e=>{"use strict";e.exports=a}},t={};function l(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="",l.nc=void 0;var s={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(s),l.d(s,{__set_webpack_public_path__:()=>G,default:()=>$});var e=l(315),t=l(826),n=l(379),i=l.n(n),r=l(795),a=l.n(r),o=l(569),c=l.n(o),d=l(565),u=l.n(d),p=l(216),f=l.n(p),m=l(589),v=l.n(m),y=l(738),g={};g.styleTagTransform=v(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=f(),i()(y.Z,g),y.Z&&y.Z.locals&&y.Z.locals;var h=l(145),b=l(726),w=l(135);const x=e=>e.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),E=e=>{if("undefined"==typeof document)return!0;{const t="on"+(e=>"doubleclick"===e?"dblclick":e)(e);let n=t in document;if(!n){const e=document.createElement("div");e.setAttribute(t,"return;"),n="function"==typeof e[t]}return n}},C=(e,t,n)=>{const i=e.__events||(e.__events={}),r=i[t];r&&e.removeEventListener(t,r),e.addEventListener(t,i[t]=function(e){n&&n.call(this,e)})},L=e=>{const t=new Map;return e.forEach((e=>t.set(e,e))),t},j=(...e)=>t=>{e.forEach((e=>{((e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})(e,t)}))};const O=(t,n,i,r)=>{void 0!==r&&r();const a=t.toLowerCase().split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),o=class extends e.default.Component{constructor(e){super(e),this.setComponentElRef=e=>{this.componentEl=e}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){((e,t,n={})=>{if(e instanceof Element){const i=((e,t,n)=>{const i=t.className||t.class,r=n.className||n.class,a=L(e),o=L(i?i.split(" "):[]),l=L(r?r.split(" "):[]),s=[];return a.forEach((e=>{o.has(e)?(s.push(e),o.delete(e)):l.has(e)||s.push(e)})),o.forEach((e=>s.push(e))),s.join(" ")})(e.classList,t,n);""!==i&&(e.className=i),Object.keys(t).forEach((n=>{if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){const i=n.substring(2),r=i[0].toLowerCase()+i.substring(1);E(r)||C(e,r,t[n])}else e[n]=t[n],"string"==typeof t[n]&&e.setAttribute(x(n),t[n])}))}})(this.componentEl,this.props,e)}render(){const n=this.props,{children:r,forwardedRef:a,style:o,className:l,ref:s}=n,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(n,["children","forwardedRef","style","className","ref"]);let d=Object.keys(c).reduce(((e,t)=>{const n=c[t];if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const i=t.substring(2).toLowerCase();"undefined"!=typeof document&&E(i)&&(e[t]=n)}else{const i=typeof n;"string"!==i&&"boolean"!==i&&"number"!==i||(e[x(t)]=n)}return e}),{});i&&(d=i(this.props,d));const u=Object.assign(Object.assign({},d),{ref:j(a,this.setComponentElRef),style:o});return(0,e.createElement)(t,u,r)}static get displayName(){return a}};return n&&(o.contextType=n),((t,n)=>{const i=(n,i)=>e.default.createElement(t,Object.assign({},n,{forwardedRef:i}));return i.displayName=n,e.default.forwardRef(i)})(o,a)},A=O("calcite-accordion"),V=O("calcite-accordion-item"),M=O("calcite-action"),I=O("calcite-dropdown"),S=O("calcite-dropdown-group"),k=O("calcite-dropdown-item"),T=O("calcite-pick-list-item"),B={display:"inline-block",position:"absolute",right:"10px"},H={width:"24px",height:"24px",fontSize:"12px",cursor:"pointer",padding:"0px",lineHeight:"0px",paddingLeft:"3px"},z=({layer:t})=>e.default.createElement("div",{className:"transparency-control",style:B},e.default.createElement(b.Button,{style:H,href:t.url,type:"tertiary",target:"_blank"},e.default.createElement(b.Icon,{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M6.99991 14C6.99991 14.025 7.00291 14.05 7.00391 14.075L3.46391 10.535C1.52614 8.57967 1.53349 5.42577 3.48035 3.47947C5.4272 1.53316 8.5811 1.52671 10.5359 3.46503L14.5359 7.46502C15.731 8.65643 16.2432 10.3709 15.8976 12.0227C15.552 13.6744 14.3954 15.0397 12.8229 15.652L12.5859 15.415C12.4117 15.2393 12.2717 15.0328 12.1729 14.806C13.5137 14.3989 14.5422 13.3175 14.8816 11.9579C15.2209 10.5983 14.8212 9.16045 13.8289 8.17103L9.82891 4.17103C8.37283 2.71559 6.04981 2.6031 4.45991 3.91103L4.14191 3.52403L4.45991 3.91003C3.58739 4.62642 3.05823 5.67817 3.003 6.80576C2.94776 7.93335 3.37159 9.03178 4.16991 9.83003L7.10991 12.77C7.03714 13.176 7.00033 13.5876 6.99991 14ZM22.9999 18C23.0035 16.6732 22.4763 15.4 21.5359 14.464L17.9959 10.925C17.9959 10.95 17.9999 10.975 17.9999 11C17.9981 11.4125 17.9603 11.8241 17.8869 12.23L20.8289 15.171C21.601 15.9429 22.024 16.9969 21.9999 18.0884C21.9757 19.1799 21.5064 20.2141 20.7009 20.951C19.1219 22.3968 16.6846 22.343 15.1709 20.829L11.1709 16.829C10.1694 15.8439 9.7638 14.4025 10.1046 13.0396C10.4453 11.6768 11.4816 10.5959 12.8289 10.198C12.73 9.96963 12.5892 9.76172 12.4139 9.58503L12.1799 9.35103C11.4501 9.63417 10.797 10.0846 10.2729 10.666C8.50323 12.6438 8.58708 15.6596 10.4639 17.536L14.4639 21.536C15.8939 22.9664 18.0448 23.3944 19.9135 22.6203C21.7821 21.8462 23.0003 20.0226 22.9999 18Z" fill="#6A6A6A"/>\r\n      </svg>',size:"m"}))),N={display:"inline-block",position:"absolute",right:"10px",bottom:"2px"},_=({layer:t,handleLabelsClick:n})=>e.default.createElement("div",{className:"transparency-control",style:N},e.default.createElement(M,{id:`action-vis-${t.id}`,slot:"actions-end",icon:t.labelsVisible?"view-visible":"view-hide",text:t.title,scale:"s",className:"labels-button",onClick:()=>n(t.id)})),Z={display:"inline-block",position:"absolute",right:"10px"},D={width:"24px",height:"24px",fontSize:"12px",cursor:"pointer",padding:"0px",lineHeight:"0px",paddingLeft:"3px"},P=({layer:t,handleIncreaseTransparency:n,handleDecreaseTransparency:i})=>e.default.createElement("div",{className:"transparency-control",style:Z},e.default.createElement(b.Button,{style:D,onClick:()=>i(t.id),size:"default"},e.default.createElement(b.Icon,{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M3 12H21V13H3V12Z" fill="#6A6A6A"/>\r\n        </svg>\r\n        ',size:"m"})),e.default.createElement(b.Button,{style:D,onClick:()=>n(t.id)},e.default.createElement(b.Icon,{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M6 12H12V6H13V12H19V13H13V19H12V13H6V12Z" fill="#6A6A6A"/>\r\n        </svg>\r\n        ',size:"m"}))),R=({layers:t,jimuMapView:n,toggleLayerVisibility:i,toggleAllInGroup:r,visibility:a})=>{const[o,l]=(0,e.useState)({}),[s,c]=(0,e.useState)(1),d=(e,n)=>{const i=t.find((t=>t.id===e));i&&(i.opacity=n,i.refresh())},u=e=>{c((t=>{const n=t-.1;return d(e,n),n>=0?n:0}))},p=e=>{c((t=>{const n=t+.1;return d(e,n),n<=1?n:1}))},f=e=>{const n=t.find((t=>t.id===e));n&&(n.labelsVisible=!n.labelsVisible);const i=document.getElementById(`action-vis-${e}`);i&&i.setAttribute("icon",n.labelsVisible?"view-visible":"view-hide")},m=(e,t)=>{var i;l((n=>Object.assign(Object.assign({},n),{[e]:t})));const r=null===(i=n.view.map.findLayerById(e))||void 0===i?void 0:i.parent;if(r){const e=r.id,t=r.layers.every((e=>a[e.id]));l((n=>Object.assign(Object.assign({},n),{[e]:t})));const n=r.parent;if(n){const e=n.id,t=n.layers.every((e=>a[e.id]));l((n=>Object.assign(Object.assign({},n),{[e]:t})))}}};return(0,e.useEffect)((()=>{t.forEach((e=>{"group"===e.type&&m(e.id,o[e.id])}))}),[t]),e.default.createElement("div",null,t.map((t=>{const s="group"===t.type,c=a[t.id];if(o[t.id],s){const o=(d=t.layers).filter((e=>a[e.id])).length===d.length;return e.default.createElement(A,{key:t.id,scale:"m"},e.default.createElement(V,{key:t.id,"item-title":t.title,heading:t.title},e.default.createElement(M,{slot:"actions-end",icon:o?"check-square":"square",onClick:()=>((e,t)=>{r(e,!t),m(e,!t)})(t.id,o),scale:"m",text:"Toggle All"}),e.default.createElement(R,{layers:t.layers,jimuMapView:n,toggleLayerVisibility:i,toggleAllInGroup:r,visibility:a})))}return e.default.createElement(T,{key:t.id,label:t.title,description:t.type,selected:c},e.default.createElement(M,{slot:"actions-end",icon:c?"check-square":"square",onClick:()=>((e,t)=>{i(e,t),(e=>{const i=n.view.map.findLayerById(e),r=null==i?void 0:i.parent;if(r){const e=r.id,n=r.layers.every((e=>t[e.id]));l((t=>Object.assign(Object.assign({},t),{[e]:n})));const i=r.parent;if(i){const e=i.id,n=i.layers.every((e=>t[e.id]));l((t=>Object.assign(Object.assign({},t),{[e]:n})))}}})(e)})(t.id,!c),text:t.title}),e.default.createElement(I,{slot:"actions-end","width-scale":"l",closeOnSelectDisabled:"true"},e.default.createElement(M,{id:`action-${t.id}`,icon:"ellipsis",slot:"trigger",text:t.title}),e.default.createElement(S,null,e.default.createElement(k,{label:"Toggle Transparency"},"Layer Transparency",e.default.createElement(P,{layer:t,handleIncreaseTransparency:p,handleDecreaseTransparency:u})),e.default.createElement(k,{label:"Layer Details",href:t.url,target:"_blank"},"Layer Details",e.default.createElement(z,{layer:t})),e.default.createElement(k,{label:"Toggle Labels"},"Toggle Labels",e.default.createElement(_,{layer:t,handleLabelsClick:f})))));var d})))},U=R,q={width:"24px",height:"24px",fontSize:"12px",cursor:"pointer",padding:"0px",lineHeight:"0px",paddingLeft:"3px"},J={width:"24px",height:"24px",fontSize:"12px",cursor:"pointer",padding:"0px",lineHeight:"0px",paddingLeft:"2px"},$=({useMapWidgetIds:n})=>{const[i,r]=(0,e.useState)(),[a,o]=(0,e.useState)({}),[l,s]=(0,e.useState)(),c=()=>{if(i&&i.view){const e=i.view.zoom;s(e)}};(0,e.useEffect)((()=>{if(!i||!i.view)return;const e=i.view.on("zoom-start",c),t=i.view.on("zoom-end",c);return()=>{e.remove(),t.remove()}}),[i]),w.default.watch((()=>[null==i?void 0:i.view.zoom]),(e=>{s(e)}));return(0,e.useEffect)((()=>{i&&console.log("Layers available:",i.view.map.layers)}),[i]),e.default.createElement("div",{className:"widget-starter jimu-widget",style:{overflowX:"hidden"}},e.default.createElement("calcite-panel",null,e.default.createElement(h.CalciteAccordion,{"icon-position":"start","icon-type":"caret",scale:"m"},e.default.createElement("div",{className:"accordion-container"},e.default.createElement("div",{id:"layerlist-header-container",className:"accordion-header",style:{height:"50px"}},e.default.createElement("h5",{style:{paddingTop:"10px"}},"Layer List"),e.default.createElement("div",{style:{marginLeft:"auto"}},e.default.createElement(b.Button,{style:q,onClick:()=>{i&&i.view&&(i.view.zoom-=1,s(i.view.zoom))},className:"btn",id:"decrease-Btn"},e.default.createElement(b.Icon,{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3 12H21V13H3V12Z" fill="#6A6A6A"/>\r\n                        </svg>\r\n                        ',size:"s"})),e.default.createElement(b.Button,{style:J,onClick:()=>{i&&i.view&&(i.view.zoom+=1,s(i.view.zoom))},className:"btn",id:"increase-Btn"},e.default.createElement(b.Icon,{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n                        <path fill-rule="evenodd" clip-rule="evenodd" d="M6 12H12V6H13V12H19V13H13V19H12V13H6V12Z" fill="#6A6A6A"/>\r\n                        </svg>\r\n                        ',size:"m"}))))),n&&1===n.length&&e.default.createElement(t.JimuMapViewComponent,{useMapWidgetId:n[0],onActiveViewChange:e=>{e?(r(e),(e=>{const t={};e.view.map.layers.forEach((e=>{t[e.id]=e.visible})),o(t)})(e),s(e.view.zoom),console.log("MapView initialized:",e)):console.error("MapView did not initialize correctly.")}}),i?e.default.createElement("div",null,e.default.createElement(U,{layers:i.view.map.layers,jimuMapView:i,toggleLayerVisibility:(e,t)=>{var n,r,a;const l=null===(n=null==i?void 0:i.view)||void 0===n?void 0:n.map.findLayerById(e);if(l){const n=null===(r=l.parent)||void 0===r?void 0:r.id,s=null===(a=null==i?void 0:i.view)||void 0===a?void 0:a.map.findLayerById(n),c=void 0!==t?t:!l.visible;s&&(s.visible=!0),l.visible=c,o((t=>Object.assign(Object.assign({},t),{[e]:c})))}},toggleAllInGroup:(e,t)=>{var n;const r=null===(n=null==i?void 0:i.view)||void 0===n?void 0:n.map.findLayerById(e);if(r&&r.layers){const e=n=>{n.visible=t,o((e=>Object.assign(Object.assign({},e),{[n.id]:t}))),n.layers&&n.layers.length>0&&n.layers.forEach((t=>e(t)))};e(r)}},visibility:a})):e.default.createElement("div",null,"Loading..."))))};function G(e){l.p=e}})(),s})())}}}));